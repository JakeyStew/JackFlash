---
import BaseLayout from '../layouts/BaseLayout.astro';
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

const portfolio = await getCollection('portfolio');

// Sort by CMS-defined order
portfolio.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout>
  <ul class="portfolio">
    {portfolio.map((item) => (
      <li>
        <button class="portfolio-item">
          <Image
            src={item.data.image}
            alt={item.data.title}
            loading="lazy"
            width={100}
            height={100}
          />
          <div class="caption">
            <h3>{item.data.title}</h3>
            <p>{item.data.description}</p>
          </div>
        </button>
      </li>
    ))}
  </ul>
</BaseLayout>

