---
// Styles
import { Image } from 'astro:assets';
import '../socials/socials.scss';

// Props
const { social_links } = Astro.props;  // Get social_links passed from the parent
---

<div class="social-links">
  {social_links.map((social) => {
    const domain = new URL(social.url).hostname;
    const faviconUrl = `https://www.google.com/s2/favicons?domain=${domain}&sz=256`;

    return (
      <a
        href={social.url}
        target="_blank"
        rel="noopener noreferrer"
        class="social-link"
        aria-label={social.platform}
        title={`Visit ${social.platform}`}
      >
        <Image
          src={faviconUrl}
          alt={`${social.platform} icon`}
          class="social-icon"
          loading={'eager'}
          width="64px"
          height="64px"
          onError={(e) => {
            e.target.src = 'data:image/svg+xml,%3Csvg%20class%3D%22ionicon%22%20viewBox%3D%220%200%20512%20512%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ccircle%20cx%3D%22128%22%20cy%3D%22256%22%20r%3D%2248%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%2232%22%2F%3E%3Ccircle%20cx%3D%22384%22%20cy%3D%22112%22%20r%3D%2248%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%2232%22%2F%3E%3Ccircle%20cx%3D%22384%22%20cy%3D%22400%22%20r%3D%2248%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%2232%22%2F%3E%3Cpath%20d%3D%22m169.83%20279.53%20172.34%2096.94m0-240.94-172.34%2096.94%22%20fill%3D%22none%22%20stroke%3D%22currentColor%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%2232%22%2F%3E%3C%2Fsvg%3E'; // Fallback on error
          }}
        />
        <span class="sr-only">{social.platform}</span>
      </a>
    );
  })}
</div>